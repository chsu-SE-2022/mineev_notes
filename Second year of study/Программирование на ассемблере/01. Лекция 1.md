Первый микропроцессор фирмы Intel в 1971 году, который работал с четырех разрядными данными. В1974 фирма создала микропроцессор 8080, работающий с восьмью разрядными данными и памятью до 64 Кб. В1976 года фирма Apple разработала первую ЭВМ. В1978, Intel разработала процессор 8086 с памятью до 1 Мб. В 1981, Intel создала свой персональный компьютер IMB PC XT. 

В 1983 года, Intel создала процессор 80286. На его основе в 1984 году был сделан IMB PC AT. В нем теоретический уже мог использоваться многозадачный режим работы, однако возможностей процессора оказалось не достаточно. 

Реально многоразрядный режим работы мог использоваться только в 32 разрядном процессоре (i386 и i486). Эти процессоры работали в двух режимах, в котором они представляли собой более быструю версию 80286, и безопасном режиме для реализации многозадачности.

В 1993 году появился Pentium.

Во всех микропроцессорах сохраняется преемственность, то есть программа написанная для младших моделей, может быть выполнена на более старших моделях. 

Это обеспечивается тем, что в системе команд лежит система команд 8086. В новые модели лишь добавляются новые команды, главным образом для обеспечения многозадачности.

Оперативная память память делится на ячейки в 8 разрядов (байт). Разряды байта нумеруются справа на лева. 



Так как последовательность 0 и 1 бывает очень длинной, то содержание ячеек принято записывать в 16 системе.

Байты нумеруются с 0. Порядковый номер байта называется его адресом. 

![[Байт.png]]

Объем оперативной памяти $2^{20}$ байта. Поэтому для ссылок на байте памяти нужны 20 разрядные адреса от 00000h - FFFFFh.

Байт это наименьшая адресуемая ячейка памяти. Есть еще более крупные ячейки слово, двойное слово и четверное слово. 

Слово это два соседних байта. Размер слова 16 разрядов, которые нумеруются справа налево от 0 до 15. Адресом слова считается адрес его первого байта.

![[Слово.png]]

Двойное слово это 32 байта. Адрес - адрес первого байта.

![[Двойное слово.png]]

Байты используются для хранения небольших целых чисел и символов. Слова используются для хранение целых чисел и адресов. Двойное слово для хранения больших чисел и строк.

Для кратковременного хранения данных используют регистры - ячейки, расположенные в центральном процессоре и доступные из машинных программ Доступ к регистрам осуществляется намного быстрее, чем к ячейкам оперативной памяти. Все регистры имеют размер в одно слово, за каждым из них закреплено имя. По назначению и способу использования регистры делятся на уровни - регистры общего назначения, сегментные регистры, указатели команд и регистр флагов.

### Регистры общего назначения

![[Регистры общего назначения.png]]

Первые 4 регистра AX, BX, CX, DX устроены таки образом что возможен независимый доступ к их старшим и младшим половинам.
Целиком регистр используется при работе с числами, а их половины - для работы с частями чисел и символами. Регистры BP, SP, SI, DI для чтения и записи целиком. 

Особенностью всех регистров общего назначения является то что их можно использовать в любых арифметических, логических и других машинных операциях.

Если в команде операнд берется из памяти то ссылаться на него можно указав некоторый адрес и некоторый регистр. В этом случаи команда будет работать с некоторым исполнительным адресом. Который вычисляется как сумма адреса, указанного в команде и текущего значения указанного регистра. Этот процесс называется модификация адреса. А используемый при этом регистр - модификатором. Ими могут быть только 4 регистра: BX, BP, SI, Di.

Модифицировать адрес можно по двум регистрам сразу, но толь так, что один из регистров - BX или BP, а другой - SI или DI.

### Сегментные регистры

- CS - сегмент команд
- DS - сегмент данных
- SS - сегмент стека
- ES - дополнительный сегмент

16 битовые, не разделяются.

В арифметических и логических операциях эти регистры не участвуют.

Эти регистры участвуют в сегментировании адресов. Если в ЭВМ используется память большого объема, тогда для ссылок на ее ячейки приходится использовать длинные адреса, а так как эти адреса указываются в командах, то и команды оказываются длинными. 

Сократить размеры команд можно используя сегментирование. 
Любой адрес $A$ можно представить как сумму $B+d$, где $B$ - начальный адрес сегмента памяти, где находится ячейка $A$, а $d$ - это смещение.

Если сегменты памяти не большие, то и смещение $d$ будет не больше, поэтому большая часть длинного адреса будет сосредоточена в $B$.
Если в команде необходимо указать адрес, тогда заносим часть $B$ этого адреса, записываем определенный регистр, и в команде вместо $A$ указываем этот регистр и смещение $d$. Благодаря модификации данных адресов, данная команда будет работать с адресом равным сумме смещения $d$ и содержимого регистра.

Размеры сегментов памяти не должны превышать 64 Кб. Поэтому смещение это 16 разрядные адреса.

В регистре CS, находится начальный адрес сегмента команд. В регистре DS, находится начальный адрес сегмента данных. SS - указывает на начало стека. Тогда при ссылках на эти сегментах в командах, соответствующие сегментные регистры не указываются, они подразумеваются по умолчанию. 

![[IP.png]]

В регистре IP всегда находится адрес команды, которая будет выполнена следующая, поэтому абсолютный адрес этой команды определяются парой регистров CS и IP. Изменения любого из этих регистров - это переход, поэтому содержимое CS и IP можно менять только командами перехода.

![[Указатель команд.png]]

Флаг - это бит принимающий значение 1, если выполнено некоторое условие, принимающий 0, если условие не выполнено.

В процессоре 8086, используются 9 флагов, собранных в 16-разряднный регистр - Flex.

Флаги делятся:
- флаги условий - автоматически меняются, при выполнении команд и фиксируют те или иные свойства результата.
	  -  CF используется для переноса арифметических операций
	- OF - используется для арифметических операций над числами со знаком. OF = 1 - переполнение мантиссы
	- ZF = 1, если результат операции равен 0
	- SF - флаг знака. SF = 1, если в операции над знаковыми числами получился отрицательный результат
	- PF - флаг чётности. PF = 1, если в восьми младших битах результата содержатся четное количество двоичных единиц (учитывается только в операциях ввода-вывода) 
	- AF - флаг дополнительного переноса. Фиксирует особенности выполнения операций над двоично-десятичными числами.
- флаги состояний - эти флаги меняет сама программа, а их состояние оказывает влияние на дальнейшую работу процессора
	- DF - флаг направления. Устанавливает направления просмотра строк в строковых командах. DF = 0, строки просматриваются вперёд, DF = 1 - в обратном направлении
	- EF - флаг прерываний. EF = 0 - процессор перестает реагировать, на поступающие к нему прерывания. EF = 1 - блокировка снимается
	- TF - флаг трассировки. TF = 1 - после выполнение каждой команды, процессор делает прерывание, что можно использовать для отладки программы

### Представление данных и команд

В процессоре 8086 делается различие между целыми числам без знака и со знаком.

Целые числа без знака:
- Байт: 0 - 255
- Слово: 0 - 65535
- Двойное слово : 0 - 4294967295

Целые числа со знака:
- Байт: -127 - +127
- Слово: -32768 - +32767
- Двойное слово: -2147483648 - +2147483647

Числа размером в слово и двойное слово, хранятся в памяти в перевёрнутом виде. Это сделано для удобство сложения и вычитания.
Однако в регистре числа размером в слово хранятся в нормальном виде.

Знаковые числа записываются в дополнительном коде.

Отрицательное число представляется беззнаковым числом $2^{k}-|x|$, если $x<0$

Символьные данные в памяти ЭВМ хранятся в двоичном виде. Для этого каждому символу ставится соответствие некоторое неотрицательное число, называемое кодом символа. Конкретное соответствие между символами и их кодами, называется системой кодировки. В ЭВМ как правило используются 8-разрядные коды символов, это позволяет закодировать 256 символов. Обычно используется система кодировки ASCII. Под каждую строку отводят нужное количество в соседних байтах, которые записывают коды символов образующих строку. Адресом строки считается адрес его первого байта. 